OBJECT Codeunit 2800 Native - Setup APIs
{
  OBJECT-PROPERTIES
  {
    Date=28.05.17;
    Time=12:00:00;
    Version List=NAVW110.0;
  }
  PROPERTIES
  {
    OnRun=BEGIN
            InsertTenantWebServices;
          END;

  }
  CODE
  {
    VAR
      ApiPrefixTxt@1000 : TextConst '@@@={Locked};ENU=nativeInvoicing';

    PROCEDURE SetupApis@1();
    BEGIN
      IF GUIALLOWED THEN
        InsertTenantWebServices;
    END;

    LOCAL PROCEDURE InsertTenantWebServices@2();
    BEGIN
      InsertOrUpdateTenantWebService(PAGE::"Native - KPIs Entity",ApiPrefixTxt + 'KPIs');
      InsertOrUpdateTenantWebService(PAGE::"Native - Customer Entity",ApiPrefixTxt + 'Customers');
      InsertOrUpdateTenantWebService(PAGE::"Native - Item Entity",ApiPrefixTxt + 'Items');
      InsertOrUpdateTenantWebService(PAGE::"Native - Sales Inv. Entity",ApiPrefixTxt + 'SalesInvoices');
      InsertOrUpdateTenantWebService(PAGE::"Native - Sales Inv Line Entity",ApiPrefixTxt + 'SalesInvoiceLines');
    END;

    LOCAL PROCEDURE InsertOrUpdateTenantWebService@6(PageNumber@1000 : Integer;ServiceName@1002 : Text);
    VAR
      TenantWebService@1001 : Record 2000000168;
    BEGIN
      IF TenantWebService.GET(TenantWebService."Object Type"::Page,ServiceName) THEN BEGIN
        TenantWebService.Published := TRUE;
        TenantWebService."Object ID" := PageNumber;
        TenantWebService.MODIFY(TRUE);
        EXIT;
      END;

      TenantWebService."Object Type" := TenantWebService."Object Type"::Page;
      TenantWebService."Service Name" := COPYSTR(ServiceName,1,MAXSTRLEN(TenantWebService."Service Name"));
      TenantWebService."Object ID" := PageNumber;
      TenantWebService.Published := TRUE;
      TenantWebService.INSERT(TRUE);
    END;

    BEGIN
    END.
  }
}

