OBJECT Codeunit 1541 Workflow Webhook Events
{
  OBJECT-PROPERTIES
  {
    Date=28.05.17;
    Time=12:00:00;
    Version List=NAVW110.0;
  }
  PROPERTIES
  {
    OnRun=BEGIN
          END;

  }
  CODE
  {
    VAR
      WorkflowWebhookResponseReceivedEventTxt@1001 : TextConst 'ENU=A response is received from a subscribed webhook.';

    [External]
    PROCEDURE WorkflowWebhookResponseReceivedEventCode@1() : Code[128];
    BEGIN
      EXIT(UPPERCASE('WorkflowWebhookResponseReceivedEvent'));
    END;

    [EventSubscriber(Codeunit,1520,OnAddWorkflowEventPredecessorsToLibrary)]
    LOCAL PROCEDURE AddWorkflowWebhookEventHierarchiesToLibrary@6(EventFunctionName@1000 : Code[128]);
    VAR
      WorkflowEventHandling@1001 : Codeunit 1520;
    BEGIN
      CASE EventFunctionName OF
        WorkflowWebhookResponseReceivedEventCode:
          BEGIN
            WorkflowEventHandling.AddEventPredecessor(WorkflowWebhookResponseReceivedEventCode,
              WorkflowEventHandling.RunWorkflowOnSendPurchaseDocForApprovalCode);
            WorkflowEventHandling.AddEventPredecessor(WorkflowWebhookResponseReceivedEventCode,
              WorkflowEventHandling.RunWorkflowOnSendSalesDocForApprovalCode);
          END;
      END;
    END;

    [EventSubscriber(Codeunit,1520,OnAddWorkflowEventsToLibrary)]
    LOCAL PROCEDURE AddWorkflowWebhookEventsToLibrary@2();
    VAR
      WorkflowEventHandling@1000 : Codeunit 1520;
    BEGIN
      WorkflowEventHandling.AddEventToLibrary(WorkflowWebhookResponseReceivedEventCode,DATABASE::"Workflow Webhook Entry",
        WorkflowWebhookResponseReceivedEventTxt,0,FALSE);
    END;

    [EventSubscriber(Codeunit,1520,OnAddWorkflowTableRelationsToLibrary)]
    LOCAL PROCEDURE AddWorkflowWebhookTableRelationsToLibrary@7();
    VAR
      DummyPurchaseHeader@1003 : Record 38;
      DummySalesHeader@1001 : Record 36;
      DummyWorkflowWebhookEntry@1002 : Record 467;
      WorkflowSetup@1000 : Codeunit 1502;
    BEGIN
      WorkflowSetup.InsertTableRelation(DATABASE::"Purchase Header",DummyPurchaseHeader.FIELDNO(Id),
        DATABASE::"Workflow Webhook Entry",DummyWorkflowWebhookEntry.FIELDNO("Data ID"));
      WorkflowSetup.InsertTableRelation(DATABASE::"Sales Header",DummySalesHeader.FIELDNO(Id),
        DATABASE::"Workflow Webhook Entry",DummyWorkflowWebhookEntry.FIELDNO("Data ID"));
    END;

    [EventSubscriber(Codeunit,1543,OnCancelWorkflow)]
    LOCAL PROCEDURE HandleOnCancelWorkflow@3(WorkflowWebhookEntry@1000 : Record 467);
    VAR
      WorkflowManagement@1001 : Codeunit 1501;
    BEGIN
      WorkflowManagement.HandleEvent(WorkflowWebhookResponseReceivedEventCode,WorkflowWebhookEntry);
    END;

    [EventSubscriber(Codeunit,1543,OnContinueWorkflow)]
    LOCAL PROCEDURE HandleOnContinueWorkflow@4(WorkflowWebhookEntry@1000 : Record 467);
    VAR
      WorkflowManagement@1001 : Codeunit 1501;
    BEGIN
      WorkflowManagement.HandleEvent(WorkflowWebhookResponseReceivedEventCode,WorkflowWebhookEntry);
    END;

    [EventSubscriber(Codeunit,1543,OnRejectWorkflow)]
    LOCAL PROCEDURE HandleOnRejectWorkflow@5(WorkflowWebhookEntry@1000 : Record 467);
    VAR
      WorkflowManagement@1001 : Codeunit 1501;
    BEGIN
      WorkflowManagement.HandleEvent(WorkflowWebhookResponseReceivedEventCode,WorkflowWebhookEntry);
    END;

    BEGIN
    END.
  }
}

