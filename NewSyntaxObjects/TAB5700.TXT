OBJECT Table 5700 Stockkeeping Unit
{
  OBJECT-PROPERTIES
  {
    Date=20171006D;
    Time=120000T;
    Version List=NAVW111.0;
  }
  PROPERTIES
  {
    OnInsert=BEGIN
               if ("Variant Code" = '') and
                  ("Location Code" = '')
               then
                 ERROR(
                   Text000,
                   FIELDCAPTION("Location Code"),FIELDCAPTION("Variant Code"),TABLECAPTION);

               "Last Date Modified" := TODAY;
               PlanningAssignment.AssignOne("Item No.","Variant Code","Location Code",WORKDATE);
             END;

    OnModify=BEGIN
               "Last Date Modified" := TODAY;
               PlanningAssignment.SKUChange(Rec,xRec);
             END;

    OnDelete=VAR
               StockkeepingCommentLine@1000 : Record "Stockkeeping Unit Comment Line";
             BEGIN
               StockkeepingCommentLine.SETRANGE("Item No.","Item No.");
               StockkeepingCommentLine.SETRANGE("Variant Code","Variant Code");
               StockkeepingCommentLine.SETRANGE("Location Code","Location Code");
               StockkeepingCommentLine.DELETEALL;
             END;

    OnRename=BEGIN
               if ("Variant Code" = '') and
                  ("Location Code" = '')
               then
                 ERROR(
                   Text000,
                   FIELDCAPTION("Location Code"),FIELDCAPTION("Variant Code"),TABLECAPTION);

               "Last Date Modified" := TODAY;
             END;

    CaptionML=ENU=Stockkeeping Unit;
    LookupPageID="Stockkeeping Unit List";
    DrillDownPageID="Stockkeeping Unit List";
  }
  FIELDS
  {
    { 1   ;   ;Item No.            ;Code20        ;TableRelation=Item WHERE (Type=CONST(Inventory));
                                                   OnValidate=VAR
                                                                Item@1000 : Record Item;
                                                              BEGIN
                                                                if "Item No." = xRec."Item No." then
                                                                  exit;

                                                                if Item.GET("Item No.") then
                                                                  CopyFromItem(Item);

                                                                CALCFIELDS(Description,"Description 2","Assembly BOM",Inventory);
                                                              END;

                                                   CaptionML=ENU=Item No.;
                                                   NotBlank=true }
    { 2   ;   ;Variant Code        ;Code10        ;TableRelation="Item Variant".Code WHERE ("Item No."=FIELD("Item No."));
                                                   OnValidate=BEGIN
                                                                CALCFIELDS(
                                                                  Inventory,"Qty. on Purch. Order","Qty. on Prod. Order","Qty. in Transit",
                                                                  "Qty. on Component Lines","Qty. on Sales Order","Qty. on Service Order","Qty. on Job Order",
                                                                  "Qty. on Assembly Order","Qty. on Asm. Component");
                                                              END;

                                                   CaptionML=ENU=Variant Code }
    { 3   ;   ;Location Code       ;Code10        ;TableRelation=Location WHERE ("Use As In-Transit"=CONST(false));
                                                   OnValidate=BEGIN
                                                                if "Location Code" = '' then
                                                                  VALIDATE("Replenishment System");
                                                                CheckTransferRoute;
                                                                CALCFIELDS(
                                                                  Inventory,"Qty. on Purch. Order","Qty. on Prod. Order","Qty. in Transit",
                                                                  "Qty. on Component Lines","Qty. on Sales Order","Qty. on Service Order","Qty. on Job Order",
                                                                  "Qty. on Assembly Order","Qty. on Asm. Component");
                                                              END;

                                                   CaptionML=ENU=Location Code }
    { 4   ;   ;Description         ;Text50        ;FieldClass=FlowField;
                                                   CalcFormula=Lookup(Item.Description WHERE ("No."=FIELD("Item No.")));
                                                   CaptionML=ENU=Description;
                                                   Editable=false }
    { 5   ;   ;Description 2       ;Text50        ;FieldClass=FlowField;
                                                   CalcFormula=Lookup(Item."Description 2" WHERE ("No."=FIELD("Item No.")));
                                                   CaptionML=ENU=Description 2;
                                                   Editable=false }
    { 6   ;   ;Assembly BOM        ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("BOM Component" WHERE ("Parent Item No."=FIELD("Item No.")));
                                                   CaptionML=ENU=Assembly BOM;
                                                   Editable=false }
    { 12  ;   ;Shelf No.           ;Code10        ;CaptionML=ENU=Shelf No. }
    { 22  ;   ;Unit Cost           ;Decimal       ;OnValidate=BEGIN
                                                                Item.GET("Item No.");
                                                                if Item."Costing Method" = Item."Costing Method"::Standard then
                                                                  VALIDATE("Standard Cost","Unit Cost")
                                                                else
                                                                  TestNoEntriesExist(FIELDCAPTION("Unit Cost"));
                                                              END;

                                                   CaptionML=ENU=Unit Cost;
                                                   MinValue=0;
                                                   AutoFormatType=2 }
    { 24  ;   ;Standard Cost       ;Decimal       ;OnValidate=BEGIN
                                                                Item.GET("Item No.");
                                                                if (Item."Costing Method" = Item."Costing Method"::Standard) and (CurrFieldNo <> 0) then
                                                                  if not
                                                                     CONFIRM(
                                                                       Text001 +
                                                                       Text002 +
                                                                       Text003,false,
                                                                       FIELDCAPTION("Standard Cost"))
                                                                  then begin
                                                                    "Standard Cost" := xRec."Standard Cost";
                                                                    exit;
                                                                  end;

                                                                ItemCostMgt.UpdateUnitCostSKU(Item,Rec,0,0,true,FIELDNO("Standard Cost"));
                                                              END;

                                                   CaptionML=ENU=Standard Cost;
                                                   MinValue=0;
                                                   AutoFormatType=2 }
    { 25  ;   ;Last Direct Cost    ;Decimal       ;CaptionML=ENU=Last Direct Cost;
                                                   MinValue=0;
                                                   AutoFormatType=2 }
    { 31  ;   ;Vendor No.          ;Code20        ;TableRelation=Vendor;
                                                   OnValidate=BEGIN
                                                                if (xRec."Vendor No." <> "Vendor No.") and
                                                                   ("Vendor No." <> '')
                                                                then
                                                                  if Vend.GET("Vendor No.") then
                                                                    "Lead Time Calculation" := Vend."Lead Time Calculation";
                                                              END;

                                                   CaptionML=ENU=Vendor No. }
    { 32  ;   ;Vendor Item No.     ;Text20        ;CaptionML=ENU=Vendor Item No. }
    { 33  ;   ;Lead Time Calculation;DateFormula  ;OnValidate=BEGIN
                                                                LeadTimeMgt.CheckLeadTimeIsNotNegative("Lead Time Calculation");
                                                              END;

                                                   CaptionML=ENU=Lead Time Calculation }
    { 34  ;   ;Reorder Point       ;Decimal       ;CaptionML=ENU=Reorder Point;
                                                   DecimalPlaces=0:5 }
    { 35  ;   ;Maximum Inventory   ;Decimal       ;AccessByPermission=TableData "Req. Wksh. Template"=R;
                                                   CaptionML=ENU=Maximum Inventory;
                                                   DecimalPlaces=0:5 }
    { 36  ;   ;Reorder Quantity    ;Decimal       ;CaptionML=ENU=Reorder Quantity;
                                                   DecimalPlaces=0:5 }
    { 53  ;   ;Comment             ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Stockkeeping Unit Comment Line" WHERE ("Item No."=FIELD("Item No."),
                                                                                                             "Variant Code"=FIELD("Variant Code"),
                                                                                                             "Location Code"=FIELD("Location Code")));
                                                   CaptionML=ENU=Comment;
                                                   Editable=false }
    { 62  ;   ;Last Date Modified  ;Date          ;CaptionML=ENU=Last Date Modified;
                                                   Editable=false }
    { 64  ;   ;Date Filter         ;Date          ;FieldClass=FlowFilter;
                                                   CaptionML=ENU=Date Filter }
    { 65  ;   ;Global Dimension 1 Filter;Code20   ;FieldClass=FlowFilter;
                                                   TableRelation="Dimension Value".Code WHERE ("Global Dimension No."=CONST(1));
                                                   CaptionML=ENU=Global Dimension 1 Filter }
    { 66  ;   ;Global Dimension 2 Filter;Code20   ;FieldClass=FlowFilter;
                                                   TableRelation="Dimension Value".Code WHERE ("Global Dimension No."=CONST(2));
                                                   CaptionML=ENU=Global Dimension 2 Filter }
    { 68  ;   ;Inventory           ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Item Ledger Entry".Quantity WHERE ("Item No."=FIELD("Item No."),
                                                                                                       "Location Code"=FIELD("Location Code"),
                                                                                                       "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                       "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                       "Drop Shipment"=FIELD("Drop Shipment Filter"),
                                                                                                       "Variant Code"=FIELD("Variant Code")));
                                                   CaptionML=ENU=Inventory;
                                                   DecimalPlaces=0:5;
                                                   Editable=false }
    { 84  ;   ;Qty. on Purch. Order;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Purchase Line"."Outstanding Qty. (Base)" WHERE ("Document Type"=CONST(Order),
                                                                                                                    Type=CONST(Item),
                                                                                                                    "No."=FIELD("Item No."),
                                                                                                                    "Location Code"=FIELD("Location Code"),
                                                                                                                    "Shortcut Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                    "Shortcut Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                    "Drop Shipment"=FIELD("Drop Shipment Filter"),
                                                                                                                    "Variant Code"=FIELD("Variant Code"),
                                                                                                                    "Expected Receipt Date"=FIELD("Date Filter")));
                                                   AccessByPermission=TableData "Purch. Rcpt. Header"=R;
                                                   CaptionML=ENU=Qty. on Purch. Order;
                                                   DecimalPlaces=0:5;
                                                   Editable=false }
    { 85  ;   ;Qty. on Sales Order ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line"."Outstanding Qty. (Base)" WHERE ("Document Type"=CONST(Order),
                                                                                                                 Type=CONST(Item),
                                                                                                                 "No."=FIELD("Item No."),
                                                                                                                 "Location Code"=FIELD("Location Code"),
                                                                                                                 "Shortcut Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                 "Shortcut Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                 "Drop Shipment"=FIELD("Drop Shipment Filter"),
                                                                                                                 "Variant Code"=FIELD("Variant Code"),
                                                                                                                 "Shipment Date"=FIELD("Date Filter")));
                                                   AccessByPermission=TableData "Sales Shipment Header"=R;
                                                   CaptionML=ENU=Qty. on Sales Order;
                                                   DecimalPlaces=0:5;
                                                   Editable=false }
    { 89  ;   ;Drop Shipment Filter;Boolean       ;FieldClass=FlowFilter;
                                                   CaptionML=ENU=Drop Shipment Filter }
    { 910 ;   ;Assembly Policy     ;Option        ;OnValidate=BEGIN
                                                                if "Assembly Policy" = "Assembly Policy"::"Assemble-to-Order" then
                                                                  TESTFIELD("Replenishment System","Replenishment System"::Assembly);
                                                              END;

                                                   AccessByPermission=TableData "BOM Component"=R;
                                                   CaptionML=ENU=Assembly Policy;
                                                   OptionCaptionML=ENU=Assemble-to-Stock,Assemble-to-Order;
                                                   OptionString="Assemble-to-Stock","Assemble-to-Order" }
    { 977 ;   ;Qty. on Assembly Order;Decimal     ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Assembly Header"."Remaining Quantity (Base)" WHERE ("Document Type"=CONST(Order),
                                                                                                                        "Item No."=FIELD("Item No."),
                                                                                                                        "Shortcut Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                        "Shortcut Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                        "Location Code"=FIELD("Location Code"),
                                                                                                                        "Variant Code"=FIELD("Variant Code"),
                                                                                                                        "Due Date"=FIELD("Date Filter")));
                                                   CaptionML=ENU=Qty. on Assembly Order;
                                                   DecimalPlaces=0:5;
                                                   Editable=false }
    { 978 ;   ;Qty. on Asm. Component;Decimal     ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Assembly Line"."Remaining Quantity (Base)" WHERE ("Document Type"=CONST(Order),
                                                                                                                      Type=CONST(Item),
                                                                                                                      "Shortcut Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                      "Shortcut Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                      "No."=FIELD("Item No."),
                                                                                                                      "Location Code"=FIELD("Location Code"),
                                                                                                                      "Variant Code"=FIELD("Variant Code"),
                                                                                                                      "Due Date"=FIELD("Date Filter")));
                                                   CaptionML=ENU=Qty. on Asm. Component;
                                                   DecimalPlaces=0:5;
                                                   Editable=false }
    { 1001;   ;Qty. on Job Order   ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Job Planning Line"."Remaining Qty. (Base)" WHERE (Status=CONST(Order),
                                                                                                                      Type=CONST(Item),
                                                                                                                      "No."=FIELD("Item No."),
                                                                                                                      "Location Code"=FIELD("Location Code"),
                                                                                                                      "Variant Code"=FIELD("Variant Code"),
                                                                                                                      "Planning Date"=FIELD("Date Filter")));
                                                   CaptionML=ENU=Qty. on Job Order;
                                                   DecimalPlaces=0:5;
                                                   Editable=false }
    { 5400;   ;Transfer-Level Code ;Integer       ;CaptionML=ENU=Transfer-Level Code;
                                                   Editable=false }
    { 5401;   ;Lot Size            ;Decimal       ;AccessByPermission=TableData "Production Order"=R;
                                                   CaptionML=ENU=Lot Size;
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 5410;   ;Discrete Order Quantity;Integer    ;CaptionML=ENU=Discrete Order Quantity;
                                                   MinValue=0 }
    { 5411;   ;Minimum Order Quantity;Decimal     ;CaptionML=ENU=Minimum Order Quantity;
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 5412;   ;Maximum Order Quantity;Decimal     ;AccessByPermission=TableData "Req. Wksh. Template"=R;
                                                   CaptionML=ENU=Maximum Order Quantity;
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 5413;   ;Safety Stock Quantity;Decimal      ;AccessByPermission=TableData "Req. Wksh. Template"=R;
                                                   CaptionML=ENU=Safety Stock Quantity;
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 5414;   ;Order Multiple      ;Decimal       ;AccessByPermission=TableData "Req. Wksh. Template"=R;
                                                   CaptionML=ENU=Order Multiple;
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 5415;   ;Safety Lead Time    ;DateFormula   ;OnValidate=BEGIN
                                                                CalendarMgt.CheckDateFormulaPositive("Safety Lead Time");
                                                              END;

                                                   AccessByPermission=TableData "Req. Wksh. Template"=R;
                                                   CaptionML=ENU=Safety Lead Time }
    { 5416;   ;Components at Location;Code10      ;TableRelation=Location;
                                                   CaptionML=ENU=Components at Location }
    { 5417;   ;Flushing Method     ;Option        ;CaptionML=ENU=Flushing Method;
                                                   OptionCaptionML=ENU=Manual,Forward,Backward,Pick + Forward,Pick + Backward;
                                                   OptionString=Manual,Forward,Backward,"Pick + Forward","Pick + Backward" }
    { 5419;   ;Replenishment System;Option        ;OnValidate=BEGIN
                                                                if "Replenishment System" <> "Replenishment System"::Assembly then
                                                                  TESTFIELD("Assembly Policy","Assembly Policy"::"Assemble-to-Stock");

                                                                case "Replenishment System" of
                                                                  "Replenishment System"::Purchase,
                                                                  "Replenishment System"::"Prod. Order",
                                                                  "Replenishment System"::Assembly:
                                                                    begin
                                                                      "Transfer-Level Code" := 0;
                                                                      FromLocation := "Transfer-from Code";
                                                                      if not UpdateTransferLevels(Rec) then
                                                                        ShowLoopError;
                                                                    end;
                                                                  "Replenishment System"::Transfer:
                                                                    begin
                                                                      if "Location Code" = '' then
                                                                        ERROR(
                                                                          Text004,
                                                                          FIELDCAPTION("Location Code"),TABLECAPTION,
                                                                          "Replenishment System",FIELDCAPTION("Replenishment System"));
                                                                      VALIDATE("Transfer-from Code");
                                                                    end;
                                                                end;
                                                              END;

                                                   CaptionML=ENU=Replenishment System;
                                                   OptionCaptionML=ENU=Purchase,Prod. Order,Transfer,Assembly;
                                                   OptionString=Purchase,"Prod. Order",Transfer,Assembly }
    { 5420;   ;Scheduled Receipt (Qty.);Decimal   ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Line"."Remaining Qty. (Base)" WHERE (Status=FILTER(Planned..Released),
                                                                                                                     "Item No."=FIELD("Item No."),
                                                                                                                     "Location Code"=FIELD("Location Code"),
                                                                                                                     "Variant Code"=FIELD("Variant Code"),
                                                                                                                     "Shortcut Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                     "Shortcut Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                     "Ending Date"=FIELD("Date Filter")));
                                                   CaptionML=ENU=Scheduled Receipt (Qty.);
                                                   DecimalPlaces=0:5;
                                                   Editable=false }
    { 5421;   ;Scheduled Need (Qty.);Decimal      ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Component"."Remaining Qty. (Base)" WHERE (Status=FILTER(Planned..Released),
                                                                                                                          "Item No."=FIELD("Item No."),
                                                                                                                          "Location Code"=FIELD("Location Code"),
                                                                                                                          "Variant Code"=FIELD("Variant Code"),
                                                                                                                          "Shortcut Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                          "Shortcut Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                          "Due Date"=FIELD("Date Filter")));
                                                   CaptionML=ENU=Scheduled Need (Qty.);
                                                   DecimalPlaces=0:5;
                                                   Editable=false }
    { 5423;   ;Bin Filter          ;Code20        ;FieldClass=FlowFilter;
                                                   TableRelation=Bin.Code WHERE ("Location Code"=FIELD("Location Code"));
                                                   CaptionML=ENU=Bin Filter }
    { 5428;   ;Time Bucket         ;DateFormula   ;OnValidate=BEGIN
                                                                CalendarMgt.CheckDateFormulaPositive("Time Bucket");
                                                              END;

                                                   CaptionML=ENU=Time Bucket }
    { 5440;   ;Reordering Policy   ;Option        ;OnValidate=BEGIN
                                                                "Include Inventory" :=
                                                                  "Reordering Policy" in ["Reordering Policy"::"Lot-for-Lot",
                                                                                          "Reordering Policy"::"Maximum Qty.",
                                                                                          "Reordering Policy"::"Fixed Reorder Qty."];
                                                              END;

                                                   CaptionML=ENU=Reordering Policy;
                                                   OptionCaptionML=ENU=" ,Fixed Reorder Qty.,Maximum Qty.,Order,Lot-for-Lot";
                                                   OptionString=" ","Fixed Reorder Qty.","Maximum Qty.",Order,"Lot-for-Lot" }
    { 5441;   ;Include Inventory   ;Boolean       ;CaptionML=ENU=Include Inventory }
    { 5442;   ;Manufacturing Policy;Option        ;CaptionML=ENU=Manufacturing Policy;
                                                   OptionCaptionML=ENU=Make-to-Stock,Make-to-Order;
                                                   OptionString="Make-to-Stock","Make-to-Order" }
    { 5443;   ;Rescheduling Period ;DateFormula   ;OnValidate=BEGIN
                                                                CalendarMgt.CheckDateFormulaPositive("Rescheduling Period");
                                                              END;

                                                   CaptionML=ENU=Rescheduling Period }
    { 5444;   ;Lot Accumulation Period;DateFormula;OnValidate=BEGIN
                                                                CalendarMgt.CheckDateFormulaPositive("Lot Accumulation Period");
                                                              END;

                                                   CaptionML=ENU=Lot Accumulation Period }
    { 5445;   ;Dampener Period     ;DateFormula   ;OnValidate=BEGIN
                                                                CalendarMgt.CheckDateFormulaPositive("Dampener Period");
                                                              END;

                                                   CaptionML=ENU=Dampener Period }
    { 5446;   ;Dampener Quantity   ;Decimal       ;CaptionML=ENU=Dampener Quantity;
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 5447;   ;Overflow Level      ;Decimal       ;CaptionML=ENU=Overflow Level;
                                                   DecimalPlaces=0:5;
                                                   MinValue=0 }
    { 5700;   ;Transfer-from Code  ;Code10        ;TableRelation=Location WHERE ("Use As In-Transit"=CONST(false));
                                                   OnValidate=VAR
                                                                FromSKU@1000 : Record "Stockkeeping Unit";
                                                              BEGIN
                                                                FromSKU.SETRANGE("Location Code","Transfer-from Code");
                                                                FromSKU.SETRANGE("Item No.","Item No.");
                                                                FromSKU.SETRANGE("Variant Code","Variant Code");
                                                                if not FromSKU.FINDFIRST then
                                                                  "Transfer-Level Code" := -1
                                                                else
                                                                  "Transfer-Level Code" := FromSKU."Transfer-Level Code" - 1;
                                                                FromLocation := "Transfer-from Code";
                                                                MODIFY(true);

                                                                CheckTransferRoute;
                                                              END;

                                                   CaptionML=ENU=Transfer-from Code }
    { 5701;   ;Qty. in Transit     ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Transfer Line"."Qty. in Transit (Base)" WHERE ("Derived From Line No."=CONST(0),
                                                                                                                   "Item No."=FIELD("Item No."),
                                                                                                                   "Transfer-to Code"=FIELD("Location Code"),
                                                                                                                   "Variant Code"=FIELD("Variant Code"),
                                                                                                                   "Shortcut Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                   "Shortcut Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                   "Receipt Date"=FIELD("Date Filter")));
                                                   CaptionML=ENU=Qty. in Transit;
                                                   DecimalPlaces=0:5;
                                                   Editable=false }
    { 5702;   ;Trans. Ord. Receipt (Qty.);Decimal ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Transfer Line"."Outstanding Qty. (Base)" WHERE ("Derived From Line No."=CONST(0),
                                                                                                                    "Item No."=FIELD("Item No."),
                                                                                                                    "Transfer-to Code"=FIELD("Location Code"),
                                                                                                                    "Variant Code"=FIELD("Variant Code"),
                                                                                                                    "Shortcut Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                    "Shortcut Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                    "Receipt Date"=FIELD("Date Filter")));
                                                   CaptionML=ENU=Trans. Ord. Receipt (Qty.);
                                                   DecimalPlaces=0:5;
                                                   Editable=false }
    { 5703;   ;Trans. Ord. Shipment (Qty.);Decimal;FieldClass=FlowField;
                                                   CalcFormula=Sum("Transfer Line"."Outstanding Qty. (Base)" WHERE ("Derived From Line No."=CONST(0),
                                                                                                                    "Item No."=FIELD("Item No."),
                                                                                                                    "Transfer-from Code"=FIELD("Location Code"),
                                                                                                                    "Variant Code"=FIELD("Variant Code"),
                                                                                                                    "Shortcut Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                    "Shortcut Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                    "Shipment Date"=FIELD("Date Filter")));
                                                   CaptionML=ENU=Trans. Ord. Shipment (Qty.);
                                                   DecimalPlaces=0:5;
                                                   Editable=false }
    { 5901;   ;Qty. on Service Order;Decimal      ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Service Line"."Outstanding Qty. (Base)" WHERE ("Document Type"=CONST(Order),
                                                                                                                   Type=CONST(Item),
                                                                                                                   "No."=FIELD("Item No."),
                                                                                                                   "Location Code"=FIELD("Location Code"),
                                                                                                                   "Variant Code"=FIELD("Variant Code"),
                                                                                                                   "Shortcut Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                   "Shortcut Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                   "Needed by Date"=FIELD("Date Filter")));
                                                   CaptionML=ENU=Qty. on Service Order;
                                                   DecimalPlaces=0:5;
                                                   Editable=false }
    { 7301;   ;Special Equipment Code;Code10      ;TableRelation="Special Equipment";
                                                   CaptionML=ENU=Special Equipment Code }
    { 7302;   ;Put-away Template Code;Code10      ;TableRelation="Put-away Template Header";
                                                   CaptionML=ENU=Put-away Template Code }
    { 7307;   ;Put-away Unit of Measure Code;Code10;
                                                   TableRelation="Item Unit of Measure".Code WHERE ("Item No."=FIELD("Item No."));
                                                   CaptionML=ENU=Put-away Unit of Measure Code }
    { 7380;   ;Phys Invt Counting Period Code;Code10;
                                                   TableRelation="Phys. Invt. Counting Period";
                                                   OnValidate=VAR
                                                                PhysInvtCountPeriod@1000 : Record "Phys. Invt. Counting Period";
                                                                PhysInvtCountPeriodMgt@1001 : Codeunit "Phys. Invt. Count.-Management";
                                                              BEGIN
                                                                if "Phys Invt Counting Period Code" <> '' then begin
                                                                  PhysInvtCountPeriod.GET("Phys Invt Counting Period Code");
                                                                  PhysInvtCountPeriod.TESTFIELD("Count Frequency per Year");
                                                                  if "Phys Invt Counting Period Code" <> xRec."Phys Invt Counting Period Code" then begin
                                                                    if CurrFieldNo <> 0 then
                                                                      if not CONFIRM(
                                                                           Text7380,
                                                                           false,
                                                                           FIELDCAPTION("Phys Invt Counting Period Code"),
                                                                           FIELDCAPTION("Next Counting Start Date"),
                                                                           FIELDCAPTION("Next Counting End Date"))
                                                                      then
                                                                        ERROR(Text7381);

                                                                    if ("Last Counting Period Update" = 0D) or
                                                                       ("Phys Invt Counting Period Code" <> xRec."Phys Invt Counting Period Code")
                                                                    then
                                                                      PhysInvtCountPeriodMgt.CalcPeriod(
                                                                        "Last Counting Period Update","Next Counting Start Date","Next Counting End Date",
                                                                        PhysInvtCountPeriod."Count Frequency per Year");
                                                                  end;
                                                                end else begin
                                                                  if not HideValidationDialog then
                                                                    if not CONFIRM(Text003,false,FIELDCAPTION("Phys Invt Counting Period Code")) then
                                                                      ERROR(Text7381);
                                                                  "Next Counting Start Date" := 0D;
                                                                  "Next Counting End Date" := 0D;
                                                                  "Last Counting Period Update" := 0D;
                                                                end;
                                                              END;

                                                   CaptionML=ENU=Phys Invt Counting Period Code }
    { 7381;   ;Last Counting Period Update;Date   ;CaptionML=ENU=Last Counting Period Update;
                                                   Editable=false }
    { 7383;   ;Last Phys. Invt. Date;Date         ;FieldClass=FlowField;
                                                   CalcFormula=Max("Phys. Inventory Ledger Entry"."Posting Date" WHERE ("Item No."=FIELD("Item No."),
                                                                                                                        "Location Code"=FIELD("Location Code"),
                                                                                                                        "Variant Code"=FIELD("Variant Code"),
                                                                                                                        "Phys Invt Counting Period Type"=FILTER(" "|SKU)));
                                                   CaptionML=ENU=Last Phys. Invt. Date;
                                                   Editable=false }
    { 7384;   ;Use Cross-Docking   ;Boolean       ;InitValue=true;
                                                   AccessByPermission=TableData "Bin Content"=R;
                                                   CaptionML=ENU=Use Cross-Docking }
    { 7385;   ;Next Counting Start Date;Date      ;CaptionML=ENU=Next Counting Start Date }
    { 7386;   ;Next Counting End Date;Date        ;CaptionML=ENU=Next Counting End Date }
    { 99000765;;Planned Order Receipt (Qty.);Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Line"."Remaining Qty. (Base)" WHERE (Status=CONST(Planned),
                                                                                                                     "Item No."=FIELD("Item No."),
                                                                                                                     "Variant Code"=FIELD("Variant Code"),
                                                                                                                     "Shortcut Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                     "Shortcut Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                     "Location Code"=FIELD("Location Code"),
                                                                                                                     "Ending Date"=FIELD("Date Filter")));
                                                   CaptionML=ENU=Planned Order Receipt (Qty.);
                                                   DecimalPlaces=0:5;
                                                   Editable=false }
    { 99000766;;FP Order Receipt (Qty.);Decimal   ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Line"."Remaining Qty. (Base)" WHERE (Status=CONST("Firm Planned"),
                                                                                                                     "Item No."=FIELD("Item No."),
                                                                                                                     "Variant Code"=FIELD("Variant Code"),
                                                                                                                     "Shortcut Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                     "Shortcut Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                     "Location Code"=FIELD("Location Code"),
                                                                                                                     "Ending Date"=FIELD("Date Filter")));
                                                   CaptionML=ENU=FP Order Receipt (Qty.);
                                                   DecimalPlaces=0:5;
                                                   Editable=false }
    { 99000767;;Rel. Order Receipt (Qty.);Decimal ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Line"."Remaining Qty. (Base)" WHERE (Status=CONST(Released),
                                                                                                                     "Item No."=FIELD("Item No."),
                                                                                                                     "Variant Code"=FIELD("Variant Code"),
                                                                                                                     "Shortcut Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                     "Shortcut Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                     "Location Code"=FIELD("Location Code"),
                                                                                                                     "Ending Date"=FIELD("Date Filter")));
                                                   CaptionML=ENU=Rel. Order Receipt (Qty.);
                                                   DecimalPlaces=0:5;
                                                   Editable=false }
    { 99000769;;Planned Order Release (Qty.);Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Line"."Remaining Qty. (Base)" WHERE (Status=CONST(Planned),
                                                                                                                     "Item No."=FIELD("Item No."),
                                                                                                                     "Variant Code"=FIELD("Variant Code"),
                                                                                                                     "Shortcut Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                     "Shortcut Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                     "Location Code"=FIELD("Location Code"),
                                                                                                                     "Starting Date"=FIELD("Date Filter")));
                                                   CaptionML=ENU=Planned Order Release (Qty.);
                                                   DecimalPlaces=0:5;
                                                   Editable=false }
    { 99000770;;Purch. Req. Receipt (Qty.);Decimal;FieldClass=FlowField;
                                                   CalcFormula=Sum("Requisition Line"."Quantity (Base)" WHERE (Type=CONST(Item),
                                                                                                               "No."=FIELD("Item No."),
                                                                                                               "Location Code"=FIELD("Location Code"),
                                                                                                               "Variant Code"=FIELD("Variant Code"),
                                                                                                               "Shortcut Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                               "Shortcut Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                               "Due Date"=FIELD("Date Filter")));
                                                   CaptionML=ENU=Purch. Req. Receipt (Qty.);
                                                   DecimalPlaces=0:5 }
    { 99000771;;Purch. Req. Release (Qty.);Decimal;FieldClass=FlowField;
                                                   CalcFormula=Sum("Requisition Line"."Quantity (Base)" WHERE (Type=CONST(Item),
                                                                                                               "No."=FIELD("Item No."),
                                                                                                               "Location Code"=FIELD("Location Code"),
                                                                                                               "Variant Code"=FIELD("Variant Code"),
                                                                                                               "Shortcut Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                               "Shortcut Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                               "Order Date"=FIELD("Date Filter")));
                                                   CaptionML=ENU=Purch. Req. Release (Qty.);
                                                   DecimalPlaces=0:5 }
    { 99000777;;Qty. on Prod. Order;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Line"."Remaining Qty. (Base)" WHERE (Status=FILTER(Planned..Released),
                                                                                                                     "Item No."=FIELD("Item No."),
                                                                                                                     "Shortcut Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                     "Shortcut Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                     "Location Code"=FIELD("Location Code"),
                                                                                                                     "Variant Code"=FIELD("Variant Code"),
                                                                                                                     "Due Date"=FIELD("Date Filter")));
                                                   CaptionML=ENU=Qty. on Prod. Order;
                                                   DecimalPlaces=0:5;
                                                   Editable=false }
    { 99000778;;Qty. on Component Lines;Decimal   ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Prod. Order Component"."Remaining Qty. (Base)" WHERE (Status=FILTER(Planned..Released),
                                                                                                                          "Item No."=FIELD("Item No."),
                                                                                                                          "Shortcut Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                          "Shortcut Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                          "Location Code"=FIELD("Location Code"),
                                                                                                                          "Variant Code"=FIELD("Variant Code"),
                                                                                                                          "Due Date"=FIELD("Date Filter")));
                                                   CaptionML=ENU=Qty. on Component Lines;
                                                   DecimalPlaces=0:5;
                                                   Editable=false }
  }
  KEYS
  {
    {    ;"Location Code","Item No.","Variant Code";
                                                   Clustered=true }
    {    ;"Replenishment System","Vendor No.","Transfer-from Code" }
    {    ;"Item No.","Location Code","Variant Code" }
    {    ;"Item No.","Transfer-Level Code"         }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      Text000@1000 : TextConst 'ENU=You must specify a %1 or a %2 for each %3.';
      Text001@1001 : TextConst 'ENU="There may be orders and open ledger entries for the item. "';
      Text002@1002 : TextConst 'ENU=If you change %1 it may affect new orders and entries.\\';
      Text003@1003 : TextConst 'ENU=Do you want to change %1?';
      Text004@1004 : TextConst 'ENU=You must specify a %1 for this %2 to use %3 as %4.';
      Text005@1005 : TextConst 'ENU=You must specify a %1 from %2 %3 to %2 %4.';
      Text006@1006 : TextConst 'ENU=A circular reference in %1 has been detected:\%2 ->%3 ->%4';
      TransferRoute@1007 : Record "Transfer Route";
      Item@1008 : Record Item;
      PlanningAssignment@1009 : Record "Planning Assignment";
      Vend@1016 : Record Vendor;
      ItemCostMgt@1012 : Codeunit ItemCostManagement;
      CalendarMgt@1017 : Codeunit "Calendar Management";
      LeadTimeMgt@1018 : Codeunit "Lead-Time Management";
      FromLocation@1010 : Code[10];
      ErrorString@1011 : Text[80];
      HideValidationDialog@1019 : Boolean;
      Text008@1013 : TextConst 'ENU=You cannot change %1 because there are one or more ledger entries for this SKU.';
      Text7380@1015 : TextConst '@@@=If you change the Phys Invt Counting Period Code, the Next Counting Start Date and Next Counting End Date are calculated.\Do you still want to change the Phys Invt Counting Period Code?;ENU=If you change the %1, the %2 and %3 are calculated.\Do you still want to change the %1?';
      Text7381@1014 : TextConst 'ENU=Cancelled.';

    LOCAL PROCEDURE TransferRouteExists@1(TransferFromCode@1000 : Code[10];TransferToCode@1001 : Code[10]) : Boolean;
    BEGIN
      TransferRoute.SETRANGE("Transfer-from Code",TransferFromCode);
      TransferRoute.SETRANGE("Transfer-to Code",TransferToCode);
      exit(TransferRoute.FINDFIRST);
    END;

    LOCAL PROCEDURE UpdateTransferLevels@2(FromSKU@1000 : Record "Stockkeeping Unit") : Boolean;
    VAR
      ToSKU@1001 : Record "Stockkeeping Unit";
    BEGIN
      ToSKU.SETCURRENTKEY("Replenishment System","Vendor No.","Transfer-from Code");
      ToSKU.SETRANGE("Replenishment System","Replenishment System"::Transfer);
      ToSKU.SETRANGE("Transfer-from Code",FromSKU."Location Code");
      ToSKU.SETRANGE("Item No.",FromSKU."Item No.");
      ToSKU.SETRANGE("Variant Code",FromSKU."Variant Code");
      if ToSKU.FIND('-') then
        repeat
          if ToSKU."Location Code" = FromLocation then begin
            ErrorString := ToSKU."Location Code";
            exit(false);
          end;
          ToSKU."Transfer-Level Code" := FromSKU."Transfer-Level Code" - 1;
          ToSKU.MODIFY;
          if not UpdateTransferLevels(ToSKU) then begin
            if (STRLEN(ErrorString) + STRLEN(ToSKU."Location Code")) >
               (MAXSTRLEN(ErrorString) - 9)
            then begin
              ErrorString := ErrorString + ' ->...';
              ShowLoopError;
            end;
            ErrorString := ErrorString + ' ->' + ToSKU."Location Code";
            exit(false);
          end;
        until ToSKU.NEXT = 0;
      exit(true);
    END;

    LOCAL PROCEDURE ShowLoopError@3();
    BEGIN
      ERROR(Text006,FIELDCAPTION("Transfer-from Code"),ErrorString,"Location Code","Transfer-from Code");
    END;

    LOCAL PROCEDURE TestNoEntriesExist@4(CurrentFieldName@1000 : Text[100]);
    VAR
      ItemLedgEntry@1001 : Record "Item Ledger Entry";
    BEGIN
      ItemLedgEntry.SETRANGE("Item No.","Item No.");
      ItemLedgEntry.SETRANGE("Variant Code","Variant Code");
      ItemLedgEntry.SETRANGE("Location Code","Location Code");
      if not ItemLedgEntry.ISEMPTY then
        ERROR(
          Text008,
          CurrentFieldName);
    END;

    [External]
    PROCEDURE ShowTimeline@6(SKU@1000 : Record "Stockkeeping Unit");
    BEGIN
      Item.ShowTimelineFromSKU(SKU."Item No.",SKU."Location Code",SKU."Variant Code");
    END;

    [External]
    PROCEDURE UpdateTempSKUTransferLevels@5(FromSKU@1000 : Record "Stockkeeping Unit";VAR TempToSKU@1001 : TEMPORARY Record "Stockkeeping Unit";FromLocationCode@1002 : Code[10]) : Boolean;
    BEGIN
      // Used by the planning engine to update the transfer level codes on a temporary SKU record set
      // generated based on actual transfer orders.

      TempToSKU.RESET;
      TempToSKU.SETCURRENTKEY("Item No.","Location Code","Variant Code");
      TempToSKU.SETRANGE("Transfer-from Code",FromSKU."Location Code");
      TempToSKU.SETRANGE("Item No.",FromSKU."Item No.");
      TempToSKU.SETRANGE("Variant Code",FromSKU."Variant Code");
      if TempToSKU.FIND('-') then
        repeat
          if TempToSKU."Location Code" = FromLocationCode then begin
            ErrorString := TempToSKU."Location Code";
            exit(false);
          end;
          TempToSKU."Transfer-Level Code" := FromSKU."Transfer-Level Code" - 1;
          TempToSKU.MODIFY;
          if not TempToSKU.UpdateTempSKUTransferLevels(TempToSKU,TempToSKU,FromLocationCode) then begin
            if (STRLEN(ErrorString) + STRLEN(TempToSKU."Location Code")) >
               (MAXSTRLEN(ErrorString) - 9)
            then begin
              ErrorString := ErrorString + ' ->...';
              ERROR(
                Text006,
                FIELDCAPTION("Transfer-from Code"),ErrorString,"Location Code","Transfer-from Code");
            end;
            ErrorString := ErrorString + ' ->' + TempToSKU."Location Code";
            exit(false);
          end;
        until TempToSKU.NEXT = 0;
      exit(true);
    END;

    LOCAL PROCEDURE CheckTransferRoute@7();
    BEGIN
      if not UpdateTransferLevels(Rec) then
        ShowLoopError;

      if "Transfer-from Code" <> '' then
        if not TransferRouteExists("Transfer-from Code","Location Code") then
          ERROR(
            Text005,
            TransferRoute.TABLECAPTION,
            FIELDCAPTION("Location Code"),
            "Transfer-from Code",
            "Location Code");
    END;

    PROCEDURE SetHideValidationDialog@14(NewHideValidationDialog@1000 : Boolean);
    BEGIN
      HideValidationDialog := NewHideValidationDialog;
    END;

    [External]
    PROCEDURE CopyFromItem@8(Item@1000 : Record Item);
    BEGIN
      "Shelf No." := Item."Shelf No.";
      "Vendor No." := Item."Vendor No.";
      "Vendor Item No." := Item."Vendor Item No.";
      "Lead Time Calculation" := Item."Lead Time Calculation";
      "Reorder Point" := Item."Reorder Point";
      "Maximum Inventory" := Item."Maximum Inventory";
      "Reorder Quantity" := Item."Reorder Quantity";
      "Reordering Policy" := Item."Reordering Policy";
      "Include Inventory" := Item."Include Inventory";
      "Manufacturing Policy" := Item."Manufacturing Policy";
      "Discrete Order Quantity" := Item."Discrete Order Quantity";
      "Minimum Order Quantity" := Item."Minimum Order Quantity";
      "Maximum Order Quantity" := Item."Maximum Order Quantity";
      "Safety Stock Quantity" := Item."Safety Stock Quantity";
      "Order Multiple" := Item."Order Multiple";
      "Safety Lead Time" := Item."Safety Lead Time";
      "Flushing Method" := Item."Flushing Method";
      "Replenishment System" := Item."Replenishment System";
      "Time Bucket" := Item."Time Bucket";
      "Rescheduling Period" := Item."Rescheduling Period";
      "Lot Accumulation Period" := Item."Lot Accumulation Period";
      "Dampener Period" := Item."Dampener Period";
      "Dampener Quantity" := Item."Dampener Quantity";
      "Overflow Level" := Item."Overflow Level";
      "Lot Size" := Item."Lot Size";
      "Assembly Policy" := Item."Assembly Policy";
      "Last Direct Cost" := Item."Last Direct Cost";
      "Standard Cost" := Item."Standard Cost";
      "Unit Cost" := Item."Unit Cost";
    END;

    BEGIN
    END.
  }
}

