OBJECT Table 15 G/L Account
{
  OBJECT-PROPERTIES
  {
    Date=20171006D;
    Time=120000T;
    Version List=NAVW111.0;
  }
  PROPERTIES
  {
    DataCaptionFields="No.",Name;
    OnInsert=BEGIN
               DimMgt.UpdateDefaultDim(DATABASE::"G/L Account","No.",
                 "Global Dimension 1 Code","Global Dimension 2 Code");

               SetLastModifiedDateTime;

               if CostAccSetup.GET then
                 CostAccMgt.UpdateCostTypeFromGLAcc(Rec,xRec,0);
             END;

    OnModify=BEGIN
               SetLastModifiedDateTime;

               if CostAccSetup.GET then begin
                 if CurrFieldNo <> 0 then
                   CostAccMgt.UpdateCostTypeFromGLAcc(Rec,xRec,1)
                 else
                   CostAccMgt.UpdateCostTypeFromGLAcc(Rec,xRec,0);
               end;
             END;

    OnDelete=VAR
               GLBudgetEntry@1000 : Record "G/L Budget Entry";
               CommentLine@1001 : Record "Comment Line";
               ExtTextHeader@1002 : Record "Extended Text Header";
               AnalysisViewEntry@1003 : Record "Analysis View Entry";
               AnalysisViewBudgetEntry@1004 : Record "Analysis View Budget Entry";
               MyAccount@1006 : Record "My Account";
               MoveEntries@1005 : Codeunit MoveEntries;
             BEGIN
               MoveEntries.MoveGLEntries(Rec);

               GLBudgetEntry.SETCURRENTKEY("Budget Name","G/L Account No.");
               GLBudgetEntry.SETRANGE("G/L Account No.","No.");
               GLBudgetEntry.DELETEALL(true);

               CommentLine.SETRANGE("Table Name",CommentLine."Table Name"::"G/L Account");
               CommentLine.SETRANGE("No.","No.");
               CommentLine.DELETEALL;

               ExtTextHeader.SETRANGE("Table Name",ExtTextHeader."Table Name"::"G/L Account");
               ExtTextHeader.SETRANGE("No.","No.");
               ExtTextHeader.DELETEALL(true);

               AnalysisViewEntry.SETRANGE("Account No.","No.");
               AnalysisViewEntry.DELETEALL;

               AnalysisViewBudgetEntry.SETRANGE("G/L Account No.","No.");
               AnalysisViewBudgetEntry.DELETEALL;

               MyAccount.SETRANGE("Account No.","No.");
               MyAccount.DELETEALL;

               DimMgt.DeleteDefaultDim(DATABASE::"G/L Account","No.");
             END;

    OnRename=VAR
               SalesLine@1000 : Record "Sales Line";
               PurchaseLine@1001 : Record "Purchase Line";
             BEGIN
               SalesLine.RenameNo(SalesLine.Type::"G/L Account",xRec."No.","No.");
               PurchaseLine.RenameNo(PurchaseLine.Type::"G/L Account",xRec."No.","No.");

               SetLastModifiedDateTime;

               if CostAccSetup.READPERMISSION then
                 CostAccMgt.UpdateCostTypeFromGLAcc(Rec,xRec,3);
             END;

    CaptionML=ENU=G/L Account;
    LookupPageID="G/L Account List";
    DrillDownPageID="Chart of Accounts";
  }
  FIELDS
  {
    { 1   ;   ;No.                 ;Code20        ;AltSearchField=Search Name;
                                                   CaptionML=ENU=No.;
                                                   NotBlank=true }
    { 2   ;   ;Name                ;Text50        ;OnValidate=BEGIN
                                                                if ("Search Name" = UPPERCASE(xRec.Name)) or ("Search Name" = '') then
                                                                  "Search Name" := Name;
                                                              END;

                                                   CaptionML=ENU=Name }
    { 3   ;   ;Search Name         ;Code50        ;CaptionML=ENU=Search Name }
    { 4   ;   ;Account Type        ;Option        ;OnValidate=VAR
                                                                GLEntry@1000 : Record "G/L Entry";
                                                                GLBudgetEntry@1001 : Record "G/L Budget Entry";
                                                              BEGIN
                                                                if ("Account Type" <> "Account Type"::Posting) and
                                                                   (xRec."Account Type" = xRec."Account Type"::Posting)
                                                                then begin
                                                                  GLEntry.SETRANGE("G/L Account No.","No.");
                                                                  if not GLEntry.ISEMPTY then
                                                                    ERROR(
                                                                      Text000,
                                                                      FIELDCAPTION("Account Type"));
                                                                  GLBudgetEntry.SETRANGE("G/L Account No.","No.");
                                                                  if not GLBudgetEntry.ISEMPTY then
                                                                    ERROR(
                                                                      Text001,
                                                                      FIELDCAPTION("Account Type"));
                                                                end;
                                                                Totaling := '';
                                                                if "Account Type" = "Account Type"::Posting then begin
                                                                  if "Account Type" <> xRec."Account Type" then
                                                                    "Direct Posting" := true;
                                                                end else
                                                                  "Direct Posting" := false;
                                                              END;

                                                   CaptionML=ENU=Account Type;
                                                   OptionCaptionML=ENU=Posting,Heading,Total,Begin-Total,End-Total;
                                                   OptionString=Posting,Heading,Total,"Begin-Total","End-Total" }
    { 6   ;   ;Global Dimension 1 Code;Code20     ;TableRelation="Dimension Value".Code WHERE ("Global Dimension No."=CONST(1));
                                                   OnValidate=BEGIN
                                                                ValidateShortcutDimCode(1,"Global Dimension 1 Code");
                                                              END;

                                                   CaptionML=ENU=Global Dimension 1 Code;
                                                   CaptionClass='1,1,1' }
    { 7   ;   ;Global Dimension 2 Code;Code20     ;TableRelation="Dimension Value".Code WHERE ("Global Dimension No."=CONST(2));
                                                   OnValidate=BEGIN
                                                                ValidateShortcutDimCode(2,"Global Dimension 2 Code");
                                                              END;

                                                   CaptionML=ENU=Global Dimension 2 Code;
                                                   CaptionClass='1,1,2' }
    { 8   ;   ;Account Category    ;Option        ;OnValidate=BEGIN
                                                                if "Account Category" = "Account Category"::" " then
                                                                  exit;

                                                                if "Account Category" in ["Account Category"::Income,"Account Category"::"Cost of Goods Sold","Account Category"::Expense] then
                                                                  "Income/Balance" := "Income/Balance"::"Income Statement"
                                                                else
                                                                  "Income/Balance" := "Income/Balance"::"Balance Sheet";
                                                                if "Account Category" <> xRec."Account Category" then
                                                                  "Account Subcategory Entry No." := 0;

                                                                UpdateAccountCategoryOfSubAccounts;
                                                              END;

                                                   CaptionML=ENU=Account Category;
                                                   OptionCaptionML=ENU=" ,Assets,Liabilities,Equity,Income,Cost of Goods Sold,Expense";
                                                   OptionString=" ",Assets,Liabilities,Equity,Income,"Cost of Goods Sold",Expense;
                                                   BlankZero=true }
    { 9   ;   ;Income/Balance      ;Option        ;OnValidate=VAR
                                                                CostType@1000 : Record "Cost Type";
                                                              BEGIN
                                                                if ("Income/Balance" = "Income/Balance"::"Balance Sheet") and ("Cost Type No." <> '') then begin
                                                                  if CostType.GET("No.") then begin
                                                                    CostType."G/L Account Range" := '';
                                                                    CostType.MODIFY;
                                                                  end;
                                                                  "Cost Type No." := '';
                                                                end;
                                                              END;

                                                   CaptionML=ENU=Income/Balance;
                                                   OptionCaptionML=ENU=Income Statement,Balance Sheet;
                                                   OptionString="Income Statement","Balance Sheet" }
    { 10  ;   ;Debit/Credit        ;Option        ;CaptionML=ENU=Debit/Credit;
                                                   OptionCaptionML=ENU=Both,Debit,Credit;
                                                   OptionString=Both,Debit,Credit }
    { 11  ;   ;No. 2               ;Code20        ;CaptionML=ENU=No. 2 }
    { 12  ;   ;Comment             ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Comment Line" WHERE ("Table Name"=CONST("G/L Account"),
                                                                                           "No."=FIELD("No.")));
                                                   CaptionML=ENU=Comment;
                                                   Editable=false }
    { 13  ;   ;Blocked             ;Boolean       ;CaptionML=ENU=Blocked }
    { 14  ;   ;Direct Posting      ;Boolean       ;InitValue=true;
                                                   CaptionML=ENU=Direct Posting }
    { 16  ;   ;Reconciliation Account;Boolean     ;AccessByPermission=TableData "Bank Account"=R;
                                                   CaptionML=ENU=Reconciliation Account }
    { 17  ;   ;New Page            ;Boolean       ;CaptionML=ENU=New Page }
    { 18  ;   ;No. of Blank Lines  ;Integer       ;CaptionML=ENU=No. of Blank Lines;
                                                   MinValue=0 }
    { 19  ;   ;Indentation         ;Integer       ;CaptionML=ENU=Indentation;
                                                   MinValue=0 }
    { 25  ;   ;Last Modified Date Time;DateTime   ;CaptionML=ENU=Last Modified Date Time;
                                                   Editable=false }
    { 26  ;   ;Last Date Modified  ;Date          ;CaptionML=ENU=Last Date Modified;
                                                   Editable=false }
    { 28  ;   ;Date Filter         ;Date          ;FieldClass=FlowFilter;
                                                   CaptionML=ENU=Date Filter }
    { 29  ;   ;Global Dimension 1 Filter;Code20   ;FieldClass=FlowFilter;
                                                   TableRelation="Dimension Value".Code WHERE ("Global Dimension No."=CONST(1));
                                                   CaptionML=ENU=Global Dimension 1 Filter;
                                                   CaptionClass='1,3,1' }
    { 30  ;   ;Global Dimension 2 Filter;Code20   ;FieldClass=FlowFilter;
                                                   TableRelation="Dimension Value".Code WHERE ("Global Dimension No."=CONST(2));
                                                   CaptionML=ENU=Global Dimension 2 Filter;
                                                   CaptionClass='1,3,2' }
    { 31  ;   ;Balance at Date     ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("G/L Entry".Amount WHERE ("G/L Account No."=FIELD("No."),
                                                                                             "G/L Account No."=FIELD(FILTER(Totaling)),
                                                                                             "Business Unit Code"=FIELD("Business Unit Filter"),
                                                                                             "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                             "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                             "Posting Date"=FIELD(UPPERLIMIT("Date Filter")),
                                                                                             "Dimension Set ID"=FIELD("Dimension Set ID Filter")));
                                                   CaptionML=ENU=Balance at Date;
                                                   Editable=false;
                                                   AutoFormatType=1 }
    { 32  ;   ;Net Change          ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("G/L Entry".Amount WHERE ("G/L Account No."=FIELD("No."),
                                                                                             "G/L Account No."=FIELD(FILTER(Totaling)),
                                                                                             "Business Unit Code"=FIELD("Business Unit Filter"),
                                                                                             "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                             "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                             "Posting Date"=FIELD("Date Filter"),
                                                                                             "Dimension Set ID"=FIELD("Dimension Set ID Filter")));
                                                   CaptionML=ENU=Net Change;
                                                   Editable=false;
                                                   AutoFormatType=1 }
    { 33  ;   ;Budgeted Amount     ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("G/L Budget Entry".Amount WHERE ("G/L Account No."=FIELD("No."),
                                                                                                    "G/L Account No."=FIELD(FILTER(Totaling)),
                                                                                                    "Business Unit Code"=FIELD("Business Unit Filter"),
                                                                                                    "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                    "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                    Date=FIELD("Date Filter"),
                                                                                                    "Budget Name"=FIELD("Budget Filter"),
                                                                                                    "Dimension Set ID"=FIELD("Dimension Set ID Filter")));
                                                   CaptionML=ENU=Budgeted Amount;
                                                   AutoFormatType=1 }
    { 34  ;   ;Totaling            ;Text250       ;OnValidate=BEGIN
                                                                if not IsTotaling then
                                                                  FIELDERROR("Account Type");
                                                                CALCFIELDS(Balance);
                                                              END;

                                                   ValidateTableRelation=false;
                                                   TestTableRelation=false;
                                                   CaptionML=ENU=Totaling }
    { 35  ;   ;Budget Filter       ;Code10        ;FieldClass=FlowFilter;
                                                   TableRelation="G/L Budget Name";
                                                   CaptionML=ENU=Budget Filter }
    { 36  ;   ;Balance             ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("G/L Entry".Amount WHERE ("G/L Account No."=FIELD("No."),
                                                                                             "G/L Account No."=FIELD(FILTER(Totaling)),
                                                                                             "Business Unit Code"=FIELD("Business Unit Filter"),
                                                                                             "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                             "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                             "Dimension Set ID"=FIELD("Dimension Set ID Filter")));
                                                   CaptionML=ENU=Balance;
                                                   Editable=false;
                                                   AutoFormatType=1 }
    { 37  ;   ;Budget at Date      ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("G/L Budget Entry".Amount WHERE ("G/L Account No."=FIELD("No."),
                                                                                                    "G/L Account No."=FIELD(FILTER(Totaling)),
                                                                                                    "Business Unit Code"=FIELD("Business Unit Filter"),
                                                                                                    "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                    "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                    Date=FIELD(UPPERLIMIT("Date Filter")),
                                                                                                    "Budget Name"=FIELD("Budget Filter"),
                                                                                                    "Dimension Set ID"=FIELD("Dimension Set ID Filter")));
                                                   CaptionML=ENU=Budget at Date;
                                                   Editable=false;
                                                   AutoFormatType=1 }
    { 39  ;   ;Consol. Translation Method;Option  ;OnValidate=VAR
                                                                ConflictGLAcc@1000 : Record "G/L Account";
                                                              BEGIN
                                                                if TranslationMethodConflict(ConflictGLAcc) then
                                                                  if ConflictGLAcc.GETFILTER("Consol. Debit Acc.") <> '' then
                                                                    MESSAGE(
                                                                      Text002,ConflictGLAcc.TABLECAPTION,ConflictGLAcc."No.",ConflictGLAcc.FIELDCAPTION("Consol. Debit Acc."),
                                                                      ConflictGLAcc.FIELDCAPTION("Consol. Translation Method"),ConflictGLAcc."Consol. Translation Method")
                                                                  else
                                                                    MESSAGE(
                                                                      Text002,ConflictGLAcc.TABLECAPTION,ConflictGLAcc."No.",ConflictGLAcc.FIELDCAPTION("Consol. Credit Acc."),
                                                                      ConflictGLAcc.FIELDCAPTION("Consol. Translation Method"),ConflictGLAcc."Consol. Translation Method");
                                                              END;

                                                   AccessByPermission=TableData "Business Unit"=R;
                                                   CaptionML=ENU=Consol. Translation Method;
                                                   OptionCaptionML=ENU=Average Rate (Manual),Closing Rate,Historical Rate,Composite Rate,Equity Rate;
                                                   OptionString="Average Rate (Manual)","Closing Rate","Historical Rate","Composite Rate","Equity Rate" }
    { 40  ;   ;Consol. Debit Acc.  ;Code20        ;OnValidate=VAR
                                                                ConflictGLAcc@1000 : Record "G/L Account";
                                                              BEGIN
                                                                if TranslationMethodConflict(ConflictGLAcc) then
                                                                  MESSAGE(
                                                                    Text002,ConflictGLAcc.TABLECAPTION,ConflictGLAcc."No.",ConflictGLAcc.FIELDCAPTION("Consol. Debit Acc."),
                                                                    ConflictGLAcc.FIELDCAPTION("Consol. Translation Method"),ConflictGLAcc."Consol. Translation Method");
                                                              END;

                                                   AccessByPermission=TableData "Business Unit"=R;
                                                   CaptionML=ENU=Consol. Debit Acc. }
    { 41  ;   ;Consol. Credit Acc. ;Code20        ;OnValidate=VAR
                                                                ConflictGLAcc@1000 : Record "G/L Account";
                                                              BEGIN
                                                                if TranslationMethodConflict(ConflictGLAcc) then
                                                                  MESSAGE(
                                                                    Text002,ConflictGLAcc.TABLECAPTION,ConflictGLAcc."No.",ConflictGLAcc.FIELDCAPTION("Consol. Credit Acc."),
                                                                    ConflictGLAcc.FIELDCAPTION("Consol. Translation Method"),ConflictGLAcc."Consol. Translation Method");
                                                              END;

                                                   AccessByPermission=TableData "Business Unit"=R;
                                                   CaptionML=ENU=Consol. Credit Acc. }
    { 42  ;   ;Business Unit Filter;Code20        ;FieldClass=FlowFilter;
                                                   TableRelation="Business Unit";
                                                   CaptionML=ENU=Business Unit Filter }
    { 43  ;   ;Gen. Posting Type   ;Option        ;CaptionML=ENU=Gen. Posting Type;
                                                   OptionCaptionML=ENU=" ,Purchase,Sale";
                                                   OptionString=" ",Purchase,Sale }
    { 44  ;   ;Gen. Bus. Posting Group;Code20     ;TableRelation="Gen. Business Posting Group";
                                                   OnValidate=VAR
                                                                GenBusPostingGrp@1000 : Record "Gen. Business Posting Group";
                                                              BEGIN
                                                                if xRec."Gen. Bus. Posting Group" <> "Gen. Bus. Posting Group" then
                                                                  if GenBusPostingGrp.ValidateVatBusPostingGroup(GenBusPostingGrp,"Gen. Bus. Posting Group") then
                                                                    VALIDATE("VAT Bus. Posting Group",GenBusPostingGrp."Def. VAT Bus. Posting Group");
                                                              END;

                                                   CaptionML=ENU=Gen. Bus. Posting Group }
    { 45  ;   ;Gen. Prod. Posting Group;Code20    ;TableRelation="Gen. Product Posting Group";
                                                   OnValidate=VAR
                                                                GenProdPostingGrp@1000 : Record "Gen. Product Posting Group";
                                                              BEGIN
                                                                if xRec."Gen. Prod. Posting Group" <> "Gen. Prod. Posting Group" then
                                                                  if GenProdPostingGrp.ValidateVatProdPostingGroup(GenProdPostingGrp,"Gen. Prod. Posting Group") then
                                                                    VALIDATE("VAT Prod. Posting Group",GenProdPostingGrp."Def. VAT Prod. Posting Group");
                                                              END;

                                                   CaptionML=ENU=Gen. Prod. Posting Group }
    { 46  ;   ;Picture             ;BLOB          ;CaptionML=ENU=Picture;
                                                   SubType=Bitmap }
    { 47  ;   ;Debit Amount        ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("G/L Entry"."Debit Amount" WHERE ("G/L Account No."=FIELD("No."),
                                                                                                     "G/L Account No."=FIELD(FILTER(Totaling)),
                                                                                                     "Business Unit Code"=FIELD("Business Unit Filter"),
                                                                                                     "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                     "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                     "Posting Date"=FIELD("Date Filter"),
                                                                                                     "Dimension Set ID"=FIELD("Dimension Set ID Filter")));
                                                   CaptionML=ENU=Debit Amount;
                                                   BlankZero=true;
                                                   Editable=false;
                                                   AutoFormatType=1 }
    { 48  ;   ;Credit Amount       ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("G/L Entry"."Credit Amount" WHERE ("G/L Account No."=FIELD("No."),
                                                                                                      "G/L Account No."=FIELD(FILTER(Totaling)),
                                                                                                      "Business Unit Code"=FIELD("Business Unit Filter"),
                                                                                                      "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                      "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                      "Posting Date"=FIELD("Date Filter"),
                                                                                                      "Dimension Set ID"=FIELD("Dimension Set ID Filter")));
                                                   CaptionML=ENU=Credit Amount;
                                                   BlankZero=true;
                                                   Editable=false;
                                                   AutoFormatType=1 }
    { 49  ;   ;Automatic Ext. Texts;Boolean       ;CaptionML=ENU=Automatic Ext. Texts }
    { 52  ;   ;Budgeted Debit Amount;Decimal      ;FieldClass=FlowField;
                                                   CalcFormula=Sum("G/L Budget Entry".Amount WHERE ("G/L Account No."=FIELD("No."),
                                                                                                    "G/L Account No."=FIELD(FILTER(Totaling)),
                                                                                                    "Business Unit Code"=FIELD("Business Unit Filter"),
                                                                                                    "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                    "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                    Date=FIELD("Date Filter"),
                                                                                                    "Budget Name"=FIELD("Budget Filter"),
                                                                                                    "Dimension Set ID"=FIELD("Dimension Set ID Filter")));
                                                   CaptionML=ENU=Budgeted Debit Amount;
                                                   BlankNumbers=BlankNegAndZero;
                                                   AutoFormatType=1 }
    { 53  ;   ;Budgeted Credit Amount;Decimal     ;FieldClass=FlowField;
                                                   CalcFormula=-Sum("G/L Budget Entry".Amount WHERE ("G/L Account No."=FIELD("No."),
                                                                                                     "G/L Account No."=FIELD(FILTER(Totaling)),
                                                                                                     "Business Unit Code"=FIELD("Business Unit Filter"),
                                                                                                     "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                     "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                     Date=FIELD("Date Filter"),
                                                                                                     "Budget Name"=FIELD("Budget Filter"),
                                                                                                     "Dimension Set ID"=FIELD("Dimension Set ID Filter")));
                                                   CaptionML=ENU=Budgeted Credit Amount;
                                                   BlankNumbers=BlankNegAndZero;
                                                   AutoFormatType=1 }
    { 54  ;   ;Tax Area Code       ;Code20        ;TableRelation="Tax Area";
                                                   CaptionML=ENU=Tax Area Code }
    { 55  ;   ;Tax Liable          ;Boolean       ;CaptionML=ENU=Tax Liable }
    { 56  ;   ;Tax Group Code      ;Code20        ;TableRelation="Tax Group";
                                                   CaptionML=ENU=Tax Group Code }
    { 57  ;   ;VAT Bus. Posting Group;Code20      ;TableRelation="VAT Business Posting Group";
                                                   CaptionML=ENU=VAT Bus. Posting Group }
    { 58  ;   ;VAT Prod. Posting Group;Code20     ;TableRelation="VAT Product Posting Group";
                                                   CaptionML=ENU=VAT Prod. Posting Group }
    { 60  ;   ;Additional-Currency Net Change;Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("G/L Entry"."Additional-Currency Amount" WHERE ("G/L Account No."=FIELD("No."),
                                                                                                                   "G/L Account No."=FIELD(FILTER(Totaling)),
                                                                                                                   "Business Unit Code"=FIELD("Business Unit Filter"),
                                                                                                                   "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                   "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                   "Posting Date"=FIELD("Date Filter")));
                                                   CaptionML=ENU=Additional-Currency Net Change;
                                                   Editable=false;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 61  ;   ;Add.-Currency Balance at Date;Decimal;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Sum("G/L Entry"."Additional-Currency Amount" WHERE ("G/L Account No."=FIELD("No."),
                                                                                                                   "G/L Account No."=FIELD(FILTER(Totaling)),
                                                                                                                   "Business Unit Code"=FIELD("Business Unit Filter"),
                                                                                                                   "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                   "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                   "Posting Date"=FIELD(UPPERLIMIT("Date Filter"))));
                                                   CaptionML=ENU=Add.-Currency Balance at Date;
                                                   Editable=false;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 62  ;   ;Additional-Currency Balance;Decimal;FieldClass=FlowField;
                                                   CalcFormula=Sum("G/L Entry"."Additional-Currency Amount" WHERE ("G/L Account No."=FIELD("No."),
                                                                                                                   "G/L Account No."=FIELD(FILTER(Totaling)),
                                                                                                                   "Business Unit Code"=FIELD("Business Unit Filter"),
                                                                                                                   "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                   "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter")));
                                                   CaptionML=ENU=Additional-Currency Balance;
                                                   Editable=false;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 63  ;   ;Exchange Rate Adjustment;Option    ;AccessByPermission=TableData Currency=R;
                                                   CaptionML=ENU=Exchange Rate Adjustment;
                                                   OptionCaptionML=ENU=No Adjustment,Adjust Amount,Adjust Additional-Currency Amount;
                                                   OptionString="No Adjustment","Adjust Amount","Adjust Additional-Currency Amount" }
    { 64  ;   ;Add.-Currency Debit Amount;Decimal ;FieldClass=FlowField;
                                                   CalcFormula=Sum("G/L Entry"."Add.-Currency Debit Amount" WHERE ("G/L Account No."=FIELD("No."),
                                                                                                                   "G/L Account No."=FIELD(FILTER(Totaling)),
                                                                                                                   "Business Unit Code"=FIELD("Business Unit Filter"),
                                                                                                                   "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                   "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                   "Posting Date"=FIELD("Date Filter")));
                                                   CaptionML=ENU=Add.-Currency Debit Amount;
                                                   Editable=false;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 65  ;   ;Add.-Currency Credit Amount;Decimal;FieldClass=FlowField;
                                                   CalcFormula=Sum("G/L Entry"."Add.-Currency Credit Amount" WHERE ("G/L Account No."=FIELD("No."),
                                                                                                                    "G/L Account No."=FIELD(FILTER(Totaling)),
                                                                                                                    "Business Unit Code"=FIELD("Business Unit Filter"),
                                                                                                                    "Global Dimension 1 Code"=FIELD("Global Dimension 1 Filter"),
                                                                                                                    "Global Dimension 2 Code"=FIELD("Global Dimension 2 Filter"),
                                                                                                                    "Posting Date"=FIELD("Date Filter")));
                                                   CaptionML=ENU=Add.-Currency Credit Amount;
                                                   Editable=false;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 66  ;   ;Default IC Partner G/L Acc. No;Code20;
                                                   TableRelation="IC G/L Account"."No.";
                                                   CaptionML=ENU=Default IC Partner G/L Acc. No }
    { 70  ;   ;Omit Default Descr. in Jnl.;Boolean;CaptionML=ENU=Omit Default Descr. in Jnl. }
    { 80  ;   ;Account Subcategory Entry No.;Integer;
                                                   TableRelation="G/L Account Category";
                                                   OnValidate=VAR
                                                                GLAccountCategory@1000 : Record "G/L Account Category";
                                                              BEGIN
                                                                if "Account Subcategory Entry No." = 0 then
                                                                  exit;
                                                                GLAccountCategory.GET("Account Subcategory Entry No.");
                                                                TESTFIELD("Income/Balance",GLAccountCategory."Income/Balance");
                                                                "Account Category" := GLAccountCategory."Account Category";
                                                              END;

                                                   CaptionML=ENU=Account Subcategory Entry No. }
    { 81  ;   ;Account Subcategory Descript.;Text80;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Lookup("G/L Account Category".Description WHERE ("Entry No."=FIELD("Account Subcategory Entry No.")));
                                                   CaptionML=ENU=Account Subcategory Descript.;
                                                   Editable=false }
    { 400 ;   ;Dimension Set ID Filter;Integer    ;FieldClass=FlowFilter;
                                                   CaptionML=ENU=Dimension Set ID Filter }
    { 1100;   ;Cost Type No.       ;Code20        ;TableRelation="Cost Type";
                                                   ValidateTableRelation=false;
                                                   CaptionML=ENU=Cost Type No.;
                                                   Editable=false }
    { 1700;   ;Default Deferral Template Code;Code10;
                                                   TableRelation="Deferral Template"."Deferral Code";
                                                   CaptionML=ENU=Default Deferral Template Code }
    { 8000;   ;Id                  ;GUID          ;CaptionML=ENU=Id }
  }
  KEYS
  {
    {    ;"No."                                   ;Clustered=true }
    {    ;"Search Name"                            }
    {    ;"Reconciliation Account"                 }
    {    ;"Gen. Bus. Posting Group"                }
    {    ;"Gen. Prod. Posting Group"               }
    { false;"Consol. Debit Acc.","Consol. Translation Method" }
    { false;"Consol. Credit Acc.","Consol. Translation Method" }
    {    ;Name                                     }
    {    ;"Account Type"                           }
    {    ;"Account Category"                       }
  }
  FIELDGROUPS
  {
    { 1   ;DropDown            ;"No.",Name,"Income/Balance",Blocked,"Direct Posting" }
  }
  CODE
  {
    VAR
      Text000@1000 : TextConst 'ENU=You cannot change %1 because there are one or more ledger entries associated with this account.';
      Text001@1001 : TextConst 'ENU=You cannot change %1 because this account is part of one or more budgets.';
      GLSetup@1002 : Record "General Ledger Setup";
      CostAccSetup@1006 : Record "Cost Accounting Setup";
      DimMgt@1003 : Codeunit DimensionManagement;
      CostAccMgt@1007 : Codeunit "Cost Account Mgt";
      GLSetupRead@1004 : Boolean;
      Text002@1005 : TextConst 'ENU="There is another %1: %2; which refers to the same %3, but with a different %4: %5."';
      NoAccountCategoryMatchErr@1008 : TextConst '@@@="%1=account category value, %2=the user input.";ENU=There is no subcategory description for %1 that matches ''%2''.';

    [External]
    PROCEDURE SetupNewGLAcc@1(OldGLAcc@1000 : Record "G/L Account";BelowOldGLAcc@1001 : Boolean);
    VAR
      OldGLAcc2@1002 : Record "G/L Account";
    BEGIN
      if not BelowOldGLAcc then begin
        OldGLAcc2 := OldGLAcc;
        OldGLAcc.COPY(Rec);
        OldGLAcc := OldGLAcc2;
        if not OldGLAcc.FIND('<') then
          OldGLAcc.INIT;
      end;
      "Income/Balance" := OldGLAcc."Income/Balance";
    END;

    [External]
    PROCEDURE CheckGLAcc@2();
    BEGIN
      TESTFIELD("Account Type","Account Type"::Posting);
      TESTFIELD(Blocked,false);
    END;

    [External]
    PROCEDURE ValidateAccountSubCategory@6(NewValue@1000 : Text[80]);
    VAR
      GLAccountCategory@1001 : Record "G/L Account Category";
    BEGIN
      if NewValue = "Account Subcategory Descript." then
        exit;
      if NewValue = '' then
        VALIDATE("Account Subcategory Entry No.",0)
      else begin
        GLAccountCategory.SETRANGE("Account Category","Account Category");
        GLAccountCategory.SETRANGE(Description,NewValue);
        if not GLAccountCategory.FINDFIRST then begin
          GLAccountCategory.SETFILTER(Description,'''@*' + NewValue + '*''');
          if not GLAccountCategory.FINDFIRST then
            ERROR(NoAccountCategoryMatchErr,"Account Category",NewValue);
        end;
        VALIDATE("Account Subcategory Entry No.",GLAccountCategory."Entry No.");
      end;
    END;

    [External]
    PROCEDURE LookupAccountSubCategory@5();
    VAR
      GLAccountCategory@1001 : Record "G/L Account Category";
      GLAccountCategories@1000 : Page "G/L Account Categories";
    BEGIN
      if "Account Subcategory Entry No." <> 0 then
        if GLAccountCategory.GET("Account Subcategory Entry No.") then
          GLAccountCategories.SETRECORD(GLAccountCategory);
      GLAccountCategory.SETRANGE("Income/Balance","Income/Balance");
      if "Account Category" <> 0 then
        GLAccountCategory.SETRANGE("Account Category","Account Category");
      GLAccountCategories.SETTABLEVIEW(GLAccountCategory);
      GLAccountCategories.LOOKUPMODE(true);
      if GLAccountCategories.RUNMODAL = ACTION::LookupOK then begin
        GLAccountCategories.GETRECORD(GLAccountCategory);
        VALIDATE("Account Category",GLAccountCategory."Account Category");
        "Account Subcategory Entry No." := GLAccountCategory."Entry No.";
      end;
      CALCFIELDS("Account Subcategory Descript.");
    END;

    LOCAL PROCEDURE UpdateAccountCategoryOfSubAccounts@7();
    VAR
      GLAccountSubAccount@1001 : Record "G/L Account";
    BEGIN
      if "Account Type" <> "Account Type"::"Begin-Total" then
        exit;

      GLAccountSubAccount.SETFILTER("No.",'>%1',"No.");
      GLAccountSubAccount.SETRANGE(Indentation,Indentation,Indentation + 1);
      GLAccountSubAccount.SETFILTER("Account Category",'%1|%2',"Account Category"::" ",xRec."Account Category");

      if not GLAccountSubAccount.FINDSET then
        exit;

      repeat
        if (GLAccountSubAccount.Indentation = Indentation) and
           (GLAccountSubAccount."Account Type" <> "Account Type"::"End-Total")
        then
          exit;

        GLAccountSubAccount.VALIDATE("Account Category","Account Category");
        GLAccountSubAccount.MODIFY
      until GLAccountSubAccount.NEXT = 0;
    END;

    LOCAL PROCEDURE GetCurrencyCode@3() : Code[10];
    BEGIN
      if not GLSetupRead then begin
        GLSetup.GET;
        GLSetupRead := true;
      end;
      exit(GLSetup."Additional Reporting Currency");
    END;

    LOCAL PROCEDURE ValidateShortcutDimCode@29(FieldNumber@1000 : Integer;VAR ShortcutDimCode@1001 : Code[20]);
    BEGIN
      DimMgt.ValidateDimValueCode(FieldNumber,ShortcutDimCode);
      DimMgt.SaveDefaultDim(DATABASE::"G/L Account","No.",FieldNumber,ShortcutDimCode);
      MODIFY;
    END;

    PROCEDURE TranslationMethodConflict@4(VAR GLAcc@1000 : Record "G/L Account") : Boolean;
    BEGIN
      GLAcc.RESET;
      GLAcc.SETFILTER("No.",'<>%1',"No.");
      GLAcc.SETFILTER("Consol. Translation Method",'<>%1',"Consol. Translation Method");
      if "Consol. Debit Acc." <> '' then begin
        if not GLAcc.SETCURRENTKEY("Consol. Debit Acc.","Consol. Translation Method") then
          GLAcc.SETCURRENTKEY("No.");
        GLAcc.SETRANGE("Consol. Debit Acc.","Consol. Debit Acc.");
        if GLAcc.FIND('-') then
          exit(true);
        GLAcc.SETRANGE("Consol. Debit Acc.");
      end;
      if "Consol. Credit Acc." <> '' then begin
        if not GLAcc.SETCURRENTKEY("Consol. Credit Acc.","Consol. Translation Method") then
          GLAcc.SETCURRENTKEY("No.");
        GLAcc.SETRANGE("Consol. Credit Acc.","Consol. Credit Acc.");
        if GLAcc.FIND('-') then
          exit(true);
        GLAcc.SETRANGE("Consol. Credit Acc.");
      end;
      exit(false);
    END;

    LOCAL PROCEDURE SetLastModifiedDateTime@39();
    BEGIN
      "Last Modified Date Time" := CURRENTDATETIME;
      "Last Date Modified" := TODAY;
    END;

    PROCEDURE IsTotaling@8() : Boolean;
    BEGIN
      exit("Account Type" in ["Account Type"::Total,"Account Type"::"End-Total"]);
    END;

    BEGIN
    END.
  }
}

